System.register([],(function(t,e){"use strict";var n,o,r,i,a,s,c,u,l,f,d,p,h,v,g,_,m,y,w,b,S,E,M,x,j,C,U,O,k,R,V,L,P,H,F,T,N,W,A,D,I,$,q,G,B,J,z,K,Q,X,Y,Z,tt,et,nt,ot,rt;function it(t,e){var n=function(t,e){s.__h&&s.__h(u,t,d||e),d=0;var n=u.__H||(u.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:h}),n.__[t]}(c++,7);return function(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function at(){for(var t;t=p.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ct),t.__H.__h.forEach(ut),t.__H.__h=[]}catch(e){t.__H.__h=[],s.__e(e,t.__v)}}function st(t){var e,n=function(){clearTimeout(o),w&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);w&&(e=requestAnimationFrame(n))}function ct(t){var e=u,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),u=e}function ut(t){var e=u;t.__c=t.__(),u=e}function lt(){throw new Error("Cycle detected")}function ft(){if(E>1)E--;else{for(var t,e=!1;void 0!==S;){var n=S;for(S=void 0,M++;void 0!==n;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&vt(n))try{n.c()}catch(n){e||(t=n,e=!0)}n=o}}if(M=0,E--,e)throw t}}function dt(t){if(void 0!==b){var e=t.n;if(void 0===e||e.t!==b)return e={i:0,S:t,p:b.s,n:void 0,t:b,e:void 0,x:void 0,r:e},void 0!==b.s&&(b.s.n=e),b.s=e,t.n=e,32&b.f&&t.S(e),e;if(-1===e.i)return e.i=0,void 0!==e.n&&(e.n.p=e.p,void 0!==e.p&&(e.p.n=e.n),e.p=b.s,e.n=void 0,b.s.n=e,b.s=e),e}}function pt(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}function ht(t){return new pt(t)}function vt(t){for(var e=t.s;void 0!==e;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function gt(t){for(var e=t.s;void 0!==e;e=e.n){var n=e.S.n;if(void 0!==n&&(e.r=n),e.S.n=e,e.i=-1,void 0===e.n){t.s=e;break}}}function _t(t){for(var e=t.s,n=void 0;void 0!==e;){var o=e.p;-1===e.i?(e.S.U(e),void 0!==o&&(o.n=e.n),void 0!==e.n&&(e.n.p=o)):n=e,e.S.n=e.r,void 0!==e.r&&(e.r=void 0),e=o}t.s=n}function mt(t){pt.call(this,void 0),this.x=t,this.s=void 0,this.g=x-1,this.f=4}function yt(t){var e=t.u;if(t.u=void 0,"function"==typeof e){E++;var n=b;b=void 0;try{e()}catch(e){throw t.f&=-2,t.f|=8,wt(t),e}finally{b=n,ft()}}}function wt(t){for(var e=t.s;void 0!==e;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,yt(t)}function bt(t){if(b!==this)throw new Error("Out-of-order effect");_t(this),b=t,this.f&=-2,8&this.f&&wt(this),ft()}function St(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function Et(t){var e=new St(t);try{e.c()}catch(t){throw e.d(),t}return e.d.bind(e)}function Mt(t,e){s[t]=e.bind(null,s[t]||function(){})}function xt(t){j&&j(),j=t&&t.S()}function jt(t){var e=this,n=t.data,o=function(t){return it((function(){return ht(t)}),[])}(n);o.value=n;var r=it((function(){for(var t=e.__v;t=t.__;)if(t.__c){t.__c.__$f|=4;break}return e.__$u.c=function(){e.base.data=r.peek()},function(t){return new mt(t)}((function(){var t=o.value.value;return 0===t?0:!0===t?"":t||""}))}),[]);return r.value}function Ct(t,e,n,o){var r=e in t&&void 0===t.ownerSVGElement,i=ht(n);return{o:function(t,e){i.value=t,o=e},d:Et((function(){var n=i.value.value;o[e]!==n&&(o[e]=n,r?t[e]=n:n?t.setAttribute(e,n):t.removeAttribute(e))}))}}return t("InlineContent",(function InlineContent(t,{type:e="text/plain"}){this.text=t,this.type=e})),{setters:[],execute:function(){!function(){if("undefined"!=typeof document&&!("adoptedStyleSheets"in document)){var t="ShadyCSS"in window&&!ShadyCSS.nativeShadow,e=document.implementation.createHTMLDocument(""),n=new WeakMap,o="object"==typeof DOMException?Error:DOMException,r=Object.defineProperty,i=Array.prototype.forEach,a=/@import.+?;?$/gm,s=CSSStyleSheet.prototype;s.replace=function(){return Promise.reject(new o("Can't call replace on non-constructed CSSStyleSheets."))},s.replaceSync=function(){throw new o("Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.")};var c=new WeakMap,u=new WeakMap,l=new WeakMap,f=new WeakMap,d=C.prototype;d.replace=function(t){try{return this.replaceSync(t),Promise.resolve(this)}catch(t){return Promise.reject(t)}},d.replaceSync=function(t){if(j(this),"string"==typeof t){var e=this;c.get(e).textContent=function(t){var e=t.replace(a,"");return e!==t&&console.warn("@import rules are not allowed here. See https://github.com/WICG/construct-stylesheets/issues/119#issuecomment-588352418"),e.trim()}(t),f.set(e,[]),u.get(e).forEach((function(t){t.isConnected()&&x(e,M(e,t))}))}},r(d,"cssRules",{configurable:!0,enumerable:!0,get:function(){return j(this),c.get(this).sheet.cssRules}}),r(d,"media",{configurable:!0,enumerable:!0,get:function(){return j(this),c.get(this).sheet.media}}),["addRule","deleteRule","insertRule","removeRule"].forEach((function(t){d[t]=function(){var e=this;j(e);var n=arguments;f.get(e).push({method:t,args:n}),u.get(e).forEach((function(o){if(o.isConnected()){var r=M(e,o).sheet;r[t].apply(r,n)}}));var o=c.get(e).sheet;return o[t].apply(o,n)}})),r(C,Symbol.hasInstance,{configurable:!0,value:S});var p={childList:!0,subtree:!0},h=new WeakMap,v=new WeakMap,g=new WeakMap,_=new WeakMap;if(L.prototype={isConnected:function(){var t=v.get(this);return t instanceof Document?"loading"!==t.readyState:function(t){return"isConnected"in t?t.isConnected:document.contains(t)}(t.host)},connect:function(){var t=R(this);_.get(this).observe(t,p),g.get(this).length>0&&V(this),k(t,(function(t){U(t).connect()}))},disconnect:function(){_.get(this).disconnect()},update:function(t){var e=this,n=v.get(e)===document?"Document":"ShadowRoot";if(!Array.isArray(t))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+n+": Iterator getter is not callable.");if(!t.every(S))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+n+": Failed to convert value to 'CSSStyleSheet'");if(t.some(E))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+n+": Can't adopt non-constructed stylesheets");e.sheets=t;var o,r,i=g.get(e),a=(o=t).filter((function(t,e){return o.indexOf(t)===e}));(r=a,i.filter((function(t){return-1===r.indexOf(t)}))).forEach((function(t){var n;(n=M(t,e)).parentNode.removeChild(n),function(t,e){l.get(t).delete(e),u.set(t,u.get(t).filter((function(t){return t!==e})))}(t,e)})),g.set(e,a),e.isConnected()&&a.length>0&&V(e)}},window.CSSStyleSheet=C,O(Document),"ShadowRoot"in window){O(ShadowRoot);var m=Element.prototype,y=m.attachShadow;m.attachShadow=function(t){var e=y.call(this,t);return"closed"===t.mode&&n.set(this,e),e}}var w=U(document);w.isConnected()?w.connect():document.addEventListener("DOMContentLoaded",w.connect.bind(w))}function b(t){return t.shadowRoot||n.get(t)}function S(t){return"object"==typeof t&&(d.isPrototypeOf(t)||s.isPrototypeOf(t))}function E(t){return"object"==typeof t&&s.isPrototypeOf(t)}function M(t,e){return l.get(t).get(e)}function x(t,e){requestAnimationFrame((function(){e.textContent=c.get(t).textContent,f.get(t).forEach((function(t){return e.sheet[t.method].apply(e.sheet,t.args)}))}))}function j(t){if(!c.has(t))throw new TypeError("Illegal invocation")}function C(){var t=this,n=document.createElement("style");e.body.appendChild(n),c.set(t,n),u.set(t,[]),l.set(t,new WeakMap),f.set(t,[])}function U(t){var e=h.get(t);return e||(e=new L(t),h.set(t,e)),e}function O(t){r(t.prototype,"adoptedStyleSheets",{configurable:!0,enumerable:!0,get:function(){return U(this).sheets},set:function(t){U(this).update(t)}})}function k(t,e){for(var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,(function(t){return b(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),null,!1),o=void 0;o=n.nextNode();)e(b(o))}function R(t){var e=v.get(t);return e instanceof Document?e.body:e}function V(t){var e=document.createDocumentFragment(),n=g.get(t),o=_.get(t),r=R(t);o.disconnect(),n.forEach((function(n){e.appendChild(M(n,t)||function(t,e){var n=document.createElement("style");return l.get(t).set(e,n),u.get(t).push(e),n}(n,t))})),r.insertBefore(e,null),o.observe(r,p),n.forEach((function(e){x(e,M(e,t))}))}function L(e){var n=this;n.sheets=[],v.set(n,e),g.set(n,[]),_.set(n,new MutationObserver((function(e,o){document?e.forEach((function(e){t||i.call(e.addedNodes,(function(t){t instanceof Element&&k(t,(function(t){U(t).connect()}))})),i.call(e.removedNodes,(function(e){e instanceof Element&&(function(t,e){return e instanceof HTMLStyleElement&&g.get(t).some((function(e){return M(e,t)}))}(n,e)&&V(n),t||k(e,(function(t){U(t).disconnect()})))}))})):o.disconnect()})))}}(),n="warn",o="green",r="black",t("pwaLogger",i={setOptions:t=>{n=t.logLevel||n,o=t.logBackgroundColor||o,r=t.logColor||r},debug:(...t)=>{"debug"===n&&console.debug(...a(t))},info:(...t)=>{"debug"!==n&&"info"!==n||console.info(...a(t))},warn:(...t)=>{"debug"!==n&&"info"!==n&&"warn"!==n||console.warn(...a(t))},error:(...t)=>{"debug"!==n&&"info"!==n&&"warn"!==n&&"error"!==n||console.error(...a(t))},infoGroupCollapsed:(...t)=>{"debug"!==n&&"info"!==n||console.group(...a(t))},debugGroupCollapsed:(...t)=>{"debug"===n&&console.group(...a(t))},groupEnd:()=>console.groupEnd()}),a=t=>["%cjsenv%cpwa","background: orange; color: rgb(55, 7, 7); padding: 1px 3px; margin: 0 1px","background: ".concat(o,"; color: ").concat(r,"; padding: 1px 3px; margin: 0 1px"),...t],s={__e:function(t,e,n,o){for(var r,i,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(t)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,o||{}),a=r.__d),a)return r.__E=r}catch(e){t=e}throw t}},"function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d=0,p=[],h=[],v=s.__b,g=s.__r,_=s.diffed,m=s.__c,y=s.unmount,s.__b=function(t){u=null,v&&v(t)},s.__r=function(t){g&&g(t),c=0;var e=(u=t.__c).__H;e&&(l===u?(e.__h=[],u.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=h,t.__N=t.i=void 0}))):(e.__h.forEach(ct),e.__h.forEach(ut),e.__h=[])),l=u},s.diffed=function(t){_&&_(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==p.push(e)&&f===s.requestAnimationFrame||((f=s.requestAnimationFrame)||st)(at)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==h&&(t.__=t.__V),t.i=void 0,t.__V=h}))),l=u=null},s.__c=function(t,e){e.some((function(t){try{t.__h.forEach(ct),t.__h=t.__h.filter((function(t){return!t.__||ut(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],s.__e(n,t.__v)}})),m&&m(t,e)},s.unmount=function(t){y&&y(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{ct(t)}catch(t){e=t}})),n.__H=void 0,e&&s.__e(e,n.__v))},w="function"==typeof requestAnimationFrame,b=void 0,S=void 0,E=0,M=0,x=0,pt.prototype.h=function(){return!0},pt.prototype.S=function(t){this.t!==t&&void 0===t.e&&(t.x=this.t,void 0!==this.t&&(this.t.e=t),this.t=t)},pt.prototype.U=function(t){if(void 0!==this.t){var e=t.e,n=t.x;void 0!==e&&(e.x=n,t.e=void 0),void 0!==n&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}},pt.prototype.subscribe=function(t){var e=this;return Et((function(){var n=e.value,o=32&this.f;this.f&=-33;try{t(n)}finally{this.f|=o}}))},pt.prototype.valueOf=function(){return this.value},pt.prototype.toString=function(){return this.value+""},pt.prototype.peek=function(){return this.v},Object.defineProperty(pt.prototype,"value",{get:function(){var t=dt(this);return void 0!==t&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){M>100&&lt(),this.v=t,this.i++,x++,E++;try{for(var e=this.t;void 0!==e;e=e.x)e.t.N()}finally{ft()}}}}),(mt.prototype=new pt).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===x)return!0;if(this.g=x,this.f|=1,this.i>0&&!vt(this))return this.f&=-2,!0;var t=b;try{gt(this),b=this;var e=this.x();(16&this.f||this.v!==e||0===this.i)&&(this.v=e,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return b=t,_t(this),this.f&=-2,!0},mt.prototype.S=function(t){if(void 0===this.t){this.f|=36;for(var e=this.s;void 0!==e;e=e.n)e.S.S(e)}pt.prototype.S.call(this,t)},mt.prototype.U=function(t){if(void 0!==this.t&&(pt.prototype.U.call(this,t),void 0===this.t)){this.f&=-33;for(var e=this.s;void 0!==e;e=e.n)e.S.U(e)}},mt.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;void 0!==t;t=t.x)t.t.N()}},mt.prototype.peek=function(){if(this.h()||lt(),16&this.f)throw this.v;return this.v},Object.defineProperty(mt.prototype,"value",{get:function(){1&this.f&&lt();var t=dt(this);if(this.h(),void 0!==t&&(t.i=this.i),16&this.f)throw this.v;return this.v}}),St.prototype.c=function(){var t=this.S();try{8&this.f||void 0===this.x||(this.u=this.x())}finally{t()}},St.prototype.S=function(){1&this.f&&lt(),this.f|=1,this.f&=-9,yt(this),gt(this),E++;var t=b;return b=this,bt.bind(this,t)},St.prototype.N=function(){2&this.f||(this.f|=2,this.o=S,S=this)},St.prototype.d=function(){this.f|=8,1&this.f||wt(this)},jt.displayName="_st",Object.defineProperties(pt.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:jt},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),Mt("__b",(function(t,e){if("string"==typeof e.type){var n,o=e.props;for(var r in o)if("children"!==r){var i=o[r];i instanceof pt&&(n||(e.__np=n={}),n[r]=i,o[r]=i.peek())}}t(e)})),Mt("__r",(function(t,e){xt();var n,o=e.__c;o&&(o.__$f&=-2,void 0===(n=o.__$u)&&(o.__$u=n=function(t){var e;return Et((function(){e=this})),e.c=function(){o.__$f|=1,o.setState({})},e}())),xt(n),t(e)})),Mt("__e",(function(t,e,n,o){xt(),t(e,n,o)})),Mt("diffed",(function(t,e){var n;if(xt(),"string"==typeof e.type&&(n=e.__e)){var o=e.__np,r=e.props;if(o){var i=n.U;if(i)for(var a in i){var s=i[a];void 0===s||a in o||(s.d(),i[a]=void 0)}else n.U=i={};for(var c in o){var u=i[c],l=o[c];void 0===u?(u=Ct(n,c,l,r),i[c]=u):u.o(l,r)}}}t(e)})),Mt("unmount",(function(t,e){if("string"==typeof e.type){var n=e.__e;if(n){var o=n.U;if(o)for(var r in n.U=void 0,o){var i=o[r];i&&i.d()}}}else{var a=e.__c;if(a){var s=a.__$u;s&&(a.__$u=void 0,s.d())}}t(e)})),Mt("__h",(function(t,e,n,o){o<3&&(e.__$f|=2),t(e,n,o)})),C="object"==typeof process&&process.execArgv.includes("--conditions=development"),U=(t,{strict:e=!1}={})=>{if(!P(t))throw new Error("sigi first argument must be a basic object, got ".concat(t));const n=new Map,o=R(t,n),r=Object.isExtensible(t);O({toValues:t,propertiesMetaMap:n,stateObject:t,isExtensible:!0,strict:!1});return{state:o,mutate:o=>{!function(t){if(E>0)return t();E++;try{return t()}finally{ft()}}((()=>{O({toValues:o,propertiesMetaMap:n,stateObject:t,isExtensible:r,strict:e})}))},subscribe:t=>Et((()=>{t(o)}))}},O=({toValues:t,propertiesMetaMap:e,stateObject:n,isExtensible:o,strict:r,trace:i})=>{const a=Object.getOwnPropertyNames(t);let s=0;const c=a.length;for(;s<c;){const c=a[s],u=Object.getOwnPropertyDescriptor(t,c);if(s++,u.get||u.set)throw new Error('Cannot set "'.concat(c,'", property must not use getter/setter'));if(!u.configurable)throw new Error('Cannot set "'.concat(c,'", property must be configurable'));if(!u.enumerable)throw new Error('Cannot set "'.concat(c,'", property must be enumerable'));if(!u.writable)throw new Error('Cannot set "'.concat(c,'", property must be writable'));C&&(i=i?[...i,c]:[c]);const l=e.get(c),f=!l,d=Boolean(l),p=d?l.signal.peek():void 0,h=d&&"object"===l.type,v=d&&!h,g=u.value,_=P(g),m=!_;if(d&&C&&r&&p!==k){const t=null===p?"null":typeof p,e=null===g?"null":typeof g;t!==e&&console.warn('A value type will change from "'.concat(t,'" to "').concat(e,'" at state.').concat(i.join(".")))}if(f&&!o)throw new Error('Cannot add property "'.concat(c,'", state is not extensible'));if(f&&_){const t=new Map,o=R(g,t),a=Object.isExtensible(g),s={type:"object",signal:ht(o),propertiesMetaMap:t,isExtensible:a};e.set(c,s),O({toValues:g,propertiesMetaMap:t,stateObject:g,isExtensible:!0,strict:r,trace:i}),n[c]=g}else if(f&&m){const t={type:"primitive",signal:ht(g),propertiesMetaMap:null,isExtensible:null};e.set(c,t),n[c]=g}else if(h&&_)O({toValues:g,propertiesMetaMap:l.propertiesMetaMap,stateObject:n[c],isExtensible:l.isExtensible,strict:r,trace:i});else if(h&&m)l.type="primitive",l.signal.value=g,l.propertiesMetaMap=null,l.isExtensible=null,n[c]=g;else if(v&&_){const t=new Map,e=R(g,t),o=Object.isExtensible(g);l.type="object",l.signal.value=e,l.propertiesMetaMap=t,l.isExtensible=o,O({toValues:g,propertiesMetaMap:t,stateObject:g,isExtensible:!0,strict:r,trace:i}),n[c]=g}else l.signal.value=g,n[c]=g}},k=Symbol.for("signal_placeholder"),R=(t,e)=>{const n=Object.isExtensible(t);return new Proxy(t,{get:(t,o)=>{let r=e.get(o);if(!r){if(!n)return void(C&&console.warn('no property named "'.concat(o,'" exists on state and state is not extensible')));const t=ht(k);return r={signal:t},e.set(o,r),void t.value}const i=r.proxy;if(i)return i;const a=r.signal.value;return a!==k?a:void 0},defineProperty:(t,e)=>{throw new Error('Invalid attempt to define "'.concat(e,'", cannot mutate state from outside'))},deleteProperty:(t,e)=>{throw new Error('Invalid attempt to delete "'.concat(e,'", cannot mutate state from outside'))},set:(t,e)=>{throw new Error('Invalid attempt to set "'.concat(e,'", cannot mutate state from outside'))}})},V=t=>{if(null===t)return"null";if(void 0===t)return"undefined";const e=typeof t;if("object"===e){const e=L.call(t).slice("[object ".length,-1);if("Object"===e){if(!t.constructor)return"object";const e=t.constructor.name;return"Object"===e?"object":e}return e}return e},({toString:L}=Object.prototype),P=t=>"object"===V(t),H=t=>{const e=ht(t),n={value:t,subscribe:t=>Et((()=>{t(e.value)}))};return[n,t=>{n.value=t,e.value=t}]},(F=window.navigator.serviceWorker)&&document.location.protocol,T=async t=>{let e;const n=A(t,{action:"inspect"}).then((t=>{if("object"!=typeof t)throw new TypeError("service worker script must send an object in response to inspect");e=t}));let o,r=!1;const i=new Promise((t=>{o=setTimeout((()=>{r=!0,t()}),1e3)}));return await Promise.race([n,i]),clearTimeout(o),r?{}:e},N=t=>A(t,{action:"skipWaiting"}),W=t=>A(t,{action:"claim"}),A=(t,e)=>{const{port1:n,port2:o}=new MessageChannel;return new Promise(((r,i)=>{n.onmessage=t=>{const{data:e}=t;e&&"object"==typeof e&&"string"==typeof e.actionResultStatus?"rejected"===e.actionResultStatus?i(e.actionResultValue):r(e.actionResultValue):r(e)},t.postMessage(e,[o])}))},[D,I]=H(null),($=async()=>{const{controller:t}=F;if(t){const t=await T(F.controller);I({meta:t})}else I(null)})(),F.addEventListener("controllerchange",$),q=({resourceUpdateHandlers:t,fromScriptMeta:e,toScriptMeta:n})=>{const o=[];if(!e||!e.resources)return i.debug("current sw script does not expose resources"),null;if(!n||!n.resources)return i.debug("new sw script does not expose resources"),null;const r=e.version,a=n.version;if(r!==a)return i.debug("script version changed ".concat(r,"->").concat(a)),null;const s=e.resources,c=n.resources,u=({url:e,fromUrl:n,toUrl:o,fromVersion:r,toVersion:i})=>{let a=(e=>{const n=t[e];if(n)return n;const o=s[e]?s[e].versionedUrl:"";if(o){const n=t[o];if(n)return t[e]=n,n}const r=c[e]?c[e].versionedUrl:"";if(r){const e=t[r];if(e)return e}return null})(e);if("function"==typeof a&&(a=a({fromUrl:n,toUrl:o,fromVersion:r,toVersion:i}),"object"!=typeof a))throw new TypeError("resource uupdate hanler must be an object, got ".concat(a));return null==a?null:o?n?a.replace?()=>a.replace({fromUrl:n,toUrl:o,fromVersion:r,toVersion:i}):null:a.add?()=>a.add({fromUrl:n,toUrl:o,fromVersion:r,toVersion:i}):null:a.remove?()=>a.remove({fromUrl:n,toUrl:o,fromVersion:r,toVersion:i}):null},l=Object.keys(s),f=Object.keys(c);for(const r of l){const a=s[r],l=c[r];if(l){if(l.version!==a.version){const f=u({url:r,fromUrl:a.versionedUrl||r,toUrl:l.versionedUrl||r,fromVersion:a.version||null,toVersion:l.version||null});if(!f)return console.log({fromScriptMeta:e,toScriptMeta:n,fromUrl:r,fromResources:s,toResources:c,availableHandlers:Object.keys(t)}),i.debug("nothing capable to handle update of ".concat(r)),null;o.push({type:"replace",url:r,fn:f})}}else{const t=u({url:r,fromUrl:a.versionedUrl||r,toUrl:null,fromVersion:a.version||null,toVersion:null});if(!t)return i.debug("nothing capable to handle removal of ".concat(r)),null;o.push({type:"remove",url:r,fn:t})}}for(const t of f){if(l.includes(t))continue;const e=c[t],n=u({url:t,fromUrl:null,toUrl:e.versionedUrl||t,fromVersion:null,toVersion:e.version||null});if(!n)return i.debug("nothing capable to handle introduction of ".concat(t)),null;o.push({type:"add",url:t,fn:n})}return 0===o.length?(i.debug("resources are the same"),null):async()=>{await Promise.all(o.map((async t=>{i.debug('call "'.concat(t.type,'" handler for ').concat(t.url)),await t.fn()})))}},t("createServiceWorkerFacade",(({scope:t,autoclaimOnFirstActivation:e=!1}={})=>{let n=null;const{state:o,subscribe:r,mutate:a}=U({error:null,readyState:"",meta:{},update:{error:null,readyState:"",meta:{},reloadRequired:!0}}),s={},c=async t=>{const e=await(async()=>{const{controller:t}=F;if(t)return t;const e=await F.getRegistration();return e.waiting||e.installing})(),[n,o]=await Promise.all([T(e),T(t)]);i.info("update from",n,"to",o);const r=q({resourceUpdateHandlers:s,fromScriptMeta:n,toScriptMeta:o});a({meta:n,update:{meta:o,reloadRequired:!r}});const c=t=>{a({error:t})};t.addEventListener("error",c);const u=async()=>{const e={installing:()=>{a({update:{readyState:"installing"}})},installed:()=>{a({update:{readyState:"installed"}})},activating:()=>{a({update:{readyState:"activating"}})},activated:async()=>{a({update:{readyState:"activated"}}),await G(t),i.info("update is controlling navigator"),r?(i.info("hot replace service worker"),r()):(i.info("post reload after update to clients"),A(t,{action:"postReloadAfterUpdateToClients"}))},redundant:()=>{t.removeEventListener("error",c),t.removeEventListener("statechange",u),a({update:{readyState:"redundant"}})}};await e[t.state]()};u(),t.addEventListener("statechange",u)},u=async t=>{const{installing:o,waiting:r,active:i}=t,s=o||r||i;t.onupdatefound=()=>{t.installing!==s&&c(t.installing)},F.startMessages(),n=T(s);const u=await n,l=t=>{a({error:t})};s.addEventListener("error",l);const f=()=>{({installing:()=>{a({readyState:"installing",meta:u})},installed:()=>{a({readyState:"installed",meta:u})},activating:()=>{a({readyState:"activating",meta:u})},activated:()=>{a({readyState:"activated",meta:u}),e&&!F.controller&&W(s)},redundant:()=>{s.removeEventListener("statechange",f),s.removeEventListener("error",l),a({readyState:"redundant",meta:u})}})[s.state]()};f(),s.addEventListener("statechange",f)};return(async()=>{const e=await F.getRegistration(t);e&&u(e)})(),F.addEventListener("controllerchange",(async()=>{if(F.controller&&""===o.readyState){const t=await F.getRegistration();u(t)}})),{state:o,subscribe:r,setRegistrationPromise:async t=>{try{a({error:null,readyState:"registering"});const e=await t;u(e)}catch(t){a({error:t})}},unregister:async()=>{const e=await F.getRegistration(t);if(!e)return i.debug("nothing to unregister"),!1;return await e.unregister()?(i.info("registration.unregister() done"),!0):(i.info("registration.unregister() failed"),!1)},checkForUpdates:async()=>{const e=await F.getRegistration(t);if(!e)return i.info("nothing to update"),!1;let n;a({update:{error:null,readyState:""}});try{n=await e.update()}catch(t){return a({update:{error:t}}),!1}return n.waiting?(i.info("registration.update() -> found on registration.waiting"),c(n.waiting),!0):n.installing?(i.info("registration.update() -> found on registration.installing"),!0):(i.info("registration.update() -> no update found"),!1)},activateUpdate:async()=>{const e=await F.getRegistration(t);if(!e)return void i.warn("nothing to activate");const n=e.installing||e.waiting;if(!n)return void i.warn("no update to activate");"installing"===n.state?(i.info("an update is installing, wait for it to be installed"),await new Promise((t=>{n.onstatechange=()=>{"installed"===n.state&&(n.onstatechange=null,t())}}))):i.info("an update is waiting to activate");const o=new Promise((t=>{n.onstatechange=()=>{"activated"===n.state&&(n.onstatechange=null,t())}}));i.info("send skipWaiting"),await N(n),i.info("skipWaiting done, wait for update to switch to activated"),await o,i.info("update is activated"),await G(n),i.info("update is controlling navigator")},sendMessage:async e=>{const n=await F.getRegistration(t);if(!n)return void i.warn("no service worker script to communicate with");const o=n.installing||n.waiting||n.active;return i.info("postMessage(".concat(JSON.stringify(e),") on ").concat(o.scriptURL)),A(o,e)},defineResourceUpdateHandler:(t,e)=>{if("function"!=typeof e&&"object"!=typeof e)throw new TypeError("handle must be a function or an object, got ".concat(e));const n=new URL(t,document.location).href;s[n]=e}}})),G=t=>{if(F.controller===t)return null;const e=new Promise((e=>{const n=()=>{F.controller===t&&(F.removeEventListener("controllerchange",n),e())};F.addEventListener("controllerchange",n)}));return i.info("request claim"),W(t),e},F.addEventListener("message",(t=>{"reload_after_update"===t.data&&(i.info('"reload_after_update" received from service worker -> reload page'),J())})),B=!1,J=()=>{B||(B=!0,window.location.reload())},z=(t,e,n)=>(t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}),K=t=>(window.addEventListener("appinstalled",t),()=>{window.removeEventListener("appinstalled",t)}),Q=()=>window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches,[X,Y]=H(Q()),window.matchMedia("(display-mode: standalone)").addEventListener("change",(()=>{Y(Q())})),Z=!1,tt=t=>z(window,"beforeinstallprompt",t),et=()=>!!window.beforeinstallpromptEvent&&(!X.value&&!Z),[nt,ot]=H(et()),rt=()=>{ot(et())},K((()=>{Z=!0,rt()})),tt((t=>{window.beforeinstallpromptEvent=t,rt()})),X.subscribe((()=>{rt()})),t("addToHomescreen",{availableRef:nt,prompt:async()=>{if(!window.beforeinstallpromptEvent)return console.warn("cannot prompt add to home screen: window.beforeinstallpromptEvent is missing"),!1;window.beforeinstallpromptEvent.prompt();return"accepted"===(await window.beforeinstallpromptEvent.userChoice).outcome}})}}}));