System.register([],(function(t,e){"use strict";var n,o,r,i,a,s,c,u,l,f,d,p,h,v,_,g,m,y,w,b,S,E,M,x,j,C,U,O,k,R,P,V,L,H,F,T,A,N,W,I,D,$,q,G,B,J,z,K,Q,X,Y,Z,tt;function et(t,e){var n=function(t,e){s.__h&&s.__h(u,t,d||7),d=0;var n=u.__H||(u.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:h}),n.__[t]}(c++);return function(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function nt(){for(var t;t=p.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(rt),t.__H.__h.forEach(it),t.__H.__h=[]}catch(e){t.__H.__h=[],s.__e(e,t.__v)}}function ot(t){var e,n=function(){clearTimeout(o),w&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);w&&(e=requestAnimationFrame(n))}function rt(t){var e=u,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),u=e}function it(t){var e=u;t.__c=t.__(),u=e}function at(){throw new Error("Cycle detected")}function st(){if(M>1)M--;else{for(var t,e=!1;void 0!==E;){var n=E;for(E=void 0,x++;void 0!==n;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&ft(n))try{n.c()}catch(n){e||(t=n,e=!0)}n=o}}if(x=0,M--,e)throw t}}function ct(t){if(void 0!==S){var e=t.n;if(void 0===e||e.t!==S)return e={i:0,S:t,p:S.s,n:void 0,t:S,e:void 0,x:void 0,r:e},void 0!==S.s&&(S.s.n=e),S.s=e,t.n=e,32&S.f&&t.S(e),e;if(-1===e.i)return e.i=0,void 0!==e.n&&(e.n.p=e.p,void 0!==e.p&&(e.p.n=e.n),e.p=S.s,e.n=void 0,S.s.n=e,S.s=e),e}}function ut(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}function lt(t){return new ut(t)}function ft(t){for(var e=t.s;void 0!==e;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function dt(t){for(var e=t.s;void 0!==e;e=e.n){var n=e.S.n;if(void 0!==n&&(e.r=n),e.S.n=e,e.i=-1,void 0===e.n){t.s=e;break}}}function pt(t){for(var e=t.s,n=void 0;void 0!==e;){var o=e.p;-1===e.i?(e.S.U(e),void 0!==o&&(o.n=e.n),void 0!==e.n&&(e.n.p=o)):n=e,e.S.n=e.r,void 0!==e.r&&(e.r=void 0),e=o}t.s=n}function ht(t){ut.call(this,void 0),this.x=t,this.s=void 0,this.g=j-1,this.f=4}function vt(t){var e=t.u;if(t.u=void 0,"function"==typeof e){M++;var n=S;S=void 0;try{e()}catch(e){throw t.f&=-2,t.f|=8,_t(t),e}finally{S=n,st()}}}function _t(t){for(var e=t.s;void 0!==e;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,vt(t)}function gt(t){if(S!==this)throw new Error("Out-of-order effect");pt(this),S=t,this.f&=-2,8&this.f&&_t(this),st()}function mt(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function yt(t){var e=new mt(t);try{e.c()}catch(t){throw e.d(),t}return e.d.bind(e)}function wt(t,e){s[t]=e.bind(null,s[t]||function(){})}function bt(t){b&&b(),b=t&&t.S()}function St(t){var e=this,n=t.data,o=function(t){return et((function(){return lt(t)}),[])}(n);o.value=n;var r=et((function(){for(var t=e.__v;t=t.__;)if(t.__c){t.__c.__$f|=4;break}return e.__$u.c=function(){e.base.data=r.peek()},new ht((function(){var t=o.value.value;return 0===t?0:!0===t?"":t||""}))}),[]);return r.value}function Et(t,e,n,o){var r=e in t&&void 0===t.ownerSVGElement,i=lt(n);return{o:function(t,e){i.value=t,o=e},d:yt((function(){var n=i.value.value;o[e]!==n&&(o[e]=n,r?t[e]=n:n?t.setAttribute(e,n):t.removeAttribute(e))}))}}return{setters:[],execute:function(){if(function(){if("undefined"!=typeof document&&!("adoptedStyleSheets"in document)){var t="ShadyCSS"in window&&!ShadyCSS.nativeShadow,e=document.implementation.createHTMLDocument(""),n=new WeakMap,o="object"==typeof DOMException?Error:DOMException,r=Object.defineProperty,i=Array.prototype.forEach,a=/@import.+?;?$/gm,s=CSSStyleSheet.prototype;s.replace=function(){return Promise.reject(new o("Can't call replace on non-constructed CSSStyleSheets."))},s.replaceSync=function(){throw new o("Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.")};var c=new WeakMap,u=new WeakMap,l=new WeakMap,f=new WeakMap,d=C.prototype;d.replace=function(t){try{return this.replaceSync(t),Promise.resolve(this)}catch(t){return Promise.reject(t)}},d.replaceSync=function(t){if(j(this),"string"==typeof t){var e=this;c.get(e).textContent=function(t){var e=t.replace(a,"");return e!==t&&console.warn("@import rules are not allowed here. See https://github.com/WICG/construct-stylesheets/issues/119#issuecomment-588352418"),e.trim()}(t),f.set(e,[]),u.get(e).forEach((function(t){t.isConnected()&&x(e,M(e,t))}))}},r(d,"cssRules",{configurable:!0,enumerable:!0,get:function(){return j(this),c.get(this).sheet.cssRules}}),r(d,"media",{configurable:!0,enumerable:!0,get:function(){return j(this),c.get(this).sheet.media}}),["addRule","deleteRule","insertRule","removeRule"].forEach((function(t){d[t]=function(){var e=this;j(e);var n=arguments;f.get(e).push({method:t,args:n}),u.get(e).forEach((function(o){if(o.isConnected()){var r=M(e,o).sheet;r[t].apply(r,n)}}));var o=c.get(e).sheet;return o[t].apply(o,n)}})),r(C,Symbol.hasInstance,{configurable:!0,value:S});var p={childList:!0,subtree:!0},h=new WeakMap,v=new WeakMap,_=new WeakMap,g=new WeakMap;if(V.prototype={isConnected:function(){var t=v.get(this);return t instanceof Document?"loading"!==t.readyState:function(t){return"isConnected"in t?t.isConnected:document.contains(t)}(t.host)},connect:function(){var t=R(this);g.get(this).observe(t,p),_.get(this).length>0&&P(this),k(t,(function(t){U(t).connect()}))},disconnect:function(){g.get(this).disconnect()},update:function(t){var e=this,n=v.get(e)===document?"Document":"ShadowRoot";if(!Array.isArray(t))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+n+": Iterator getter is not callable.");if(!t.every(S))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+n+": Failed to convert value to 'CSSStyleSheet'");if(t.some(E))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+n+": Can't adopt non-constructed stylesheets");e.sheets=t;var o,r,i=_.get(e),a=(o=t).filter((function(t,e){return o.indexOf(t)===e}));(r=a,i.filter((function(t){return-1===r.indexOf(t)}))).forEach((function(t){var n;(n=M(t,e)).parentNode.removeChild(n),function(t,e){l.get(t).delete(e),u.set(t,u.get(t).filter((function(t){return t!==e})))}(t,e)})),_.set(e,a),e.isConnected()&&a.length>0&&P(e)}},window.CSSStyleSheet=C,O(Document),"ShadowRoot"in window){O(ShadowRoot);var m=Element.prototype,y=m.attachShadow;m.attachShadow=function(t){var e=y.call(this,t);return"closed"===t.mode&&n.set(this,e),e}}var w=U(document);w.isConnected()?w.connect():document.addEventListener("DOMContentLoaded",w.connect.bind(w))}function b(t){return t.shadowRoot||n.get(t)}function S(t){return"object"==typeof t&&(d.isPrototypeOf(t)||s.isPrototypeOf(t))}function E(t){return"object"==typeof t&&s.isPrototypeOf(t)}function M(t,e){return l.get(t).get(e)}function x(t,e){requestAnimationFrame((function(){e.textContent=c.get(t).textContent,f.get(t).forEach((function(t){return e.sheet[t.method].apply(e.sheet,t.args)}))}))}function j(t){if(!c.has(t))throw new TypeError("Illegal invocation")}function C(){var t=this,n=document.createElement("style");e.body.appendChild(n),c.set(t,n),u.set(t,[]),l.set(t,new WeakMap),f.set(t,[])}function U(t){var e=h.get(t);return e||(e=new V(t),h.set(t,e)),e}function O(t){r(t.prototype,"adoptedStyleSheets",{configurable:!0,enumerable:!0,get:function(){return U(this).sheets},set:function(t){U(this).update(t)}})}function k(t,e){for(var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,(function(t){return b(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),null,!1),o=void 0;o=n.nextNode();)e(b(o))}function R(t){var e=v.get(t);return e instanceof Document?e.body:e}function P(t){var e=document.createDocumentFragment(),n=_.get(t),o=g.get(t),r=R(t);o.disconnect(),n.forEach((function(n){e.appendChild(M(n,t)||function(t,e){var n=document.createElement("style");return l.get(t).set(e,n),u.get(t).push(e),n}(n,t))})),r.insertBefore(e,null),o.observe(r,p),n.forEach((function(e){x(e,M(e,t))}))}function V(e){var n=this;n.sheets=[],v.set(n,e),_.set(n,[]),g.set(n,new MutationObserver((function(e,o){document?e.forEach((function(e){t||i.call(e.addedNodes,(function(t){t instanceof Element&&k(t,(function(t){U(t).connect()}))})),i.call(e.removedNodes,(function(e){e instanceof Element&&(function(t,e){return e instanceof HTMLStyleElement&&_.get(t).some((function(e){return M(e,t)}))}(n,e)&&P(n),t||k(e,(function(t){U(t).disconnect()})))}))})):o.disconnect()})))}}(),("object"==typeof self?self:process).__InlineContent__=function(t,{type:e="text/plain"}){this.text=t,this.type=e},n="warn",o="green",r="black",t("p",i={setOptions:t=>{n=t.logLevel||n,o=t.logBackgroundColor||o,r=t.logColor||r},debug:(...t)=>{"debug"===n&&console.debug(...a(t))},info:(...t)=>{"debug"!==n&&"info"!==n||console.info(...a(t))},warn:(...t)=>{"debug"!==n&&"info"!==n&&"warn"!==n||console.warn(...a(t))},error:(...t)=>{"debug"!==n&&"info"!==n&&"warn"!==n&&"error"!==n||console.error(...a(t))},infoGroupCollapsed:(...t)=>{"debug"!==n&&"info"!==n||console.group(...a(t))},debugGroupCollapsed:(...t)=>{"debug"===n&&console.group(...a(t))},groupEnd:()=>console.groupEnd()}),a=t=>["%cjsenv%cpwa","background: orange; color: rgb(55, 7, 7); padding: 1px 3px; margin: 0 1px","background: ".concat(o,"; color: ").concat(r,"; padding: 1px 3px; margin: 0 1px"),...t],s={__e:function(t,e,n,o){for(var r,i,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(t)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(t,o||{}),a=r.__d),a)return r.__E=r}catch(e){t=e}throw t}},"function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,d=0,p=[],h=[],v=s.__b,_=s.__r,g=s.diffed,m=s.__c,y=s.unmount,s.__b=function(t){u=null,v&&v(t)},s.__r=function(t){_&&_(t),c=0;var e=(u=t.__c).__H;e&&(l===u?(e.__h=[],u.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=h,t.__N=t.i=void 0}))):(e.__h.forEach(rt),e.__h.forEach(it),e.__h=[],c=0)),l=u},s.diffed=function(t){g&&g(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==p.push(e)&&f===s.requestAnimationFrame||((f=s.requestAnimationFrame)||ot)(nt)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==h&&(t.__=t.__V),t.i=void 0,t.__V=h}))),l=u=null},s.__c=function(t,e){e.some((function(t){try{t.__h.forEach(rt),t.__h=t.__h.filter((function(t){return!t.__||it(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],s.__e(n,t.__v)}})),m&&m(t,e)},s.unmount=function(t){y&&y(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{rt(t)}catch(t){e=t}})),n.__H=void 0,e&&s.__e(e,n.__v))},w="function"==typeof requestAnimationFrame,S=void 0,E=void 0,M=0,x=0,j=0,ut.prototype.h=function(){return!0},ut.prototype.S=function(t){this.t!==t&&void 0===t.e&&(t.x=this.t,void 0!==this.t&&(this.t.e=t),this.t=t)},ut.prototype.U=function(t){if(void 0!==this.t){var e=t.e,n=t.x;void 0!==e&&(e.x=n,t.e=void 0),void 0!==n&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}},ut.prototype.subscribe=function(t){var e=this;return yt((function(){var n=e.value,o=32&this.f;this.f&=-33;try{t(n)}finally{this.f|=o}}))},ut.prototype.valueOf=function(){return this.value},ut.prototype.toString=function(){return this.value+""},ut.prototype.toJSON=function(){return this.value},ut.prototype.peek=function(){return this.v},Object.defineProperty(ut.prototype,"value",{get:function(){var t=ct(this);return void 0!==t&&(t.i=this.i),this.v},set:function(t){if(S instanceof ht&&function(){throw new Error("Computed cannot have side-effects")}(),t!==this.v){x>100&&at(),this.v=t,this.i++,j++,M++;try{for(var e=this.t;void 0!==e;e=e.x)e.t.N()}finally{st()}}}}),(ht.prototype=new ut).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===j)return!0;if(this.g=j,this.f|=1,this.i>0&&!ft(this))return this.f&=-2,!0;var t=S;try{dt(this),S=this;var e=this.x();(16&this.f||this.v!==e||0===this.i)&&(this.v=e,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return S=t,pt(this),this.f&=-2,!0},ht.prototype.S=function(t){if(void 0===this.t){this.f|=36;for(var e=this.s;void 0!==e;e=e.n)e.S.S(e)}ut.prototype.S.call(this,t)},ht.prototype.U=function(t){if(void 0!==this.t&&(ut.prototype.U.call(this,t),void 0===this.t)){this.f&=-33;for(var e=this.s;void 0!==e;e=e.n)e.S.U(e)}},ht.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;void 0!==t;t=t.x)t.t.N()}},ht.prototype.peek=function(){if(this.h()||at(),16&this.f)throw this.v;return this.v},Object.defineProperty(ht.prototype,"value",{get:function(){1&this.f&&at();var t=ct(this);if(this.h(),void 0!==t&&(t.i=this.i),16&this.f)throw this.v;return this.v}}),mt.prototype.c=function(){var t=this.S();try{if(8&this.f)return;if(void 0===this.x)return;var e=this.x();"function"==typeof e&&(this.u=e)}finally{t()}},mt.prototype.S=function(){1&this.f&&at(),this.f|=1,this.f&=-9,vt(this),dt(this),M++;var t=S;return S=this,gt.bind(this,t)},mt.prototype.N=function(){2&this.f||(this.f|=2,this.o=E,E=this)},mt.prototype.d=function(){this.f|=8,1&this.f||_t(this)},St.displayName="_st",Object.defineProperties(ut.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:St},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),wt("__b",(function(t,e){if("string"==typeof e.type){var n,o=e.props;for(var r in o)if("children"!==r){var i=o[r];i instanceof ut&&(n||(e.__np=n={}),n[r]=i,o[r]=i.peek())}}t(e)})),wt("__r",(function(t,e){bt();var n,o=e.__c;o&&(o.__$f&=-2,void 0===(n=o.__$u)&&(o.__$u=n=function(t){var e;return yt((function(){e=this})),e.c=function(){o.__$f|=1,o.setState({})},e}())),bt(n),t(e)})),wt("__e",(function(t,e,n,o){bt(),t(e,n,o)})),wt("diffed",(function(t,e){var n;if(bt(),"string"==typeof e.type&&(n=e.__e)){var o=e.__np,r=e.props;if(o){var i=n.U;if(i)for(var a in i){var s=i[a];void 0===s||a in o||(s.d(),i[a]=void 0)}else n.U=i={};for(var c in o){var u=i[c],l=o[c];void 0===u?(u=Et(n,c,l,r),i[c]=u):u.o(l,r)}}}t(e)})),wt("unmount",(function(t,e){if("string"==typeof e.type){var n=e.__e;if(n){var o=n.U;if(o)for(var r in n.U=void 0,o){var i=o[r];i&&i.d()}}}else{var a=e.__c;if(a){var s=a.__$u;s&&(a.__$u=void 0,s.d())}}t(e)})),wt("__h",(function(t,e,n,o){(o<3||9===o)&&(e.__$f|=2),t(e,n,o)})),C="object"==typeof process&&process.execArgv.includes("--conditions=development"),U=(t,{strict:e=!1}={})=>{if(!V(t))throw new Error("sigi first argument must be a basic object, got ".concat(t));const n=new Map,o=R(t,n),r=Object.isExtensible(t);return O({toValues:t,propertiesMetaMap:n,stateObject:t,isExtensible:!0,strict:!1}),{state:o,mutate:o=>{!function(t){if(M>0)return t();M++;try{return t()}finally{st()}}((()=>{O({toValues:o,propertiesMetaMap:n,stateObject:t,isExtensible:r,strict:e})}))},subscribe:t=>yt((()=>{t(o)}))}},O=({toValues:t,propertiesMetaMap:e,stateObject:n,isExtensible:o,strict:r,trace:i})=>{const a=Object.getOwnPropertyNames(t);let s=0;const c=a.length;for(;s<c;){const c=a[s],u=Object.getOwnPropertyDescriptor(t,c);if(s++,u.get||u.set)throw new Error('Cannot set "'.concat(c,'", property must not use getter/setter'));if(!u.configurable)throw new Error('Cannot set "'.concat(c,'", property must be configurable'));if(!u.enumerable)throw new Error('Cannot set "'.concat(c,'", property must be enumerable'));if(!u.writable)throw new Error('Cannot set "'.concat(c,'", property must be writable'));C&&(i=i?[...i,c]:[c]);const l=e.get(c),f=!l,d=Boolean(l),p=d?l.signal.peek():void 0,h=d&&"object"===l.type,v=d&&!h,_=u.value,g=V(_),m=!g;if(d&&C&&r&&p!==k){const t=null===p?"null":typeof p,e=null===_?"null":typeof _;t!==e&&console.warn('A value type will change from "'.concat(t,'" to "').concat(e,'" at state.').concat(i.join(".")))}if(f&&!o)throw new Error('Cannot add property "'.concat(c,'", state is not extensible'));if(f&&g){const t=new Map,o=R(_,t),a=Object.isExtensible(_),s={type:"object",signal:lt(o),propertiesMetaMap:t,isExtensible:a};e.set(c,s),O({toValues:_,propertiesMetaMap:t,stateObject:_,isExtensible:!0,strict:r,trace:i}),n[c]=_}else if(f&&m){const t={type:"primitive",signal:lt(_),propertiesMetaMap:null,isExtensible:null};e.set(c,t),n[c]=_}else if(h&&g)O({toValues:_,propertiesMetaMap:l.propertiesMetaMap,stateObject:n[c],isExtensible:l.isExtensible,strict:r,trace:i});else if(h&&m)l.type="primitive",l.signal.value=_,l.propertiesMetaMap=null,l.isExtensible=null,n[c]=_;else if(v&&g){const t=new Map,e=R(_,t),o=Object.isExtensible(_);l.type="object",l.signal.value=e,l.propertiesMetaMap=t,l.isExtensible=o,O({toValues:_,propertiesMetaMap:t,stateObject:_,isExtensible:!0,strict:r,trace:i}),n[c]=_}else l.signal.value=_,n[c]=_}},k=Symbol.for("signal_placeholder"),R=(t,e)=>{const n=Object.isExtensible(t);return new Proxy(t,{get:(t,o)=>{let r=e.get(o);if(!r){if(!n)return void(C&&console.warn('no property named "'.concat(o,'" exists on state and state is not extensible')));const t=lt(k);return r={signal:t},e.set(o,r),void t.value}const i=r.proxy;if(i)return i;const a=r.signal.value;return a!==k?a:void 0},defineProperty:(t,e)=>{throw new Error('Invalid attempt to define "'.concat(e,'", cannot mutate state from outside'))},deleteProperty:(t,e)=>{throw new Error('Invalid attempt to delete "'.concat(e,'", cannot mutate state from outside'))},set:(t,e)=>{throw new Error('Invalid attempt to set "'.concat(e,'", cannot mutate state from outside'))}})},({toString:P}=Object.prototype),V=t=>"object"===(t=>{if(null===t)return"null";if(void 0===t)return"undefined";const e=typeof t;if("object"===e){const e=P.call(t).slice(8,-1);if("Object"===e){if(!t.constructor)return"object";const e=t.constructor.name;return"Object"===e?"object":e}return e}return e})(t),L=t=>{const e=lt(t),n={value:t,subscribe:t=>yt((()=>{t(e.value)}))};return[n,t=>{n.value=t,e.value=t}]},(H=window.navigator.serviceWorker)?"https:"!==document.location.protocol&&(F="protocol_must_be_https"):F="api_not_found_on_navigator",T=!F,A=async t=>{let e;const n=W(t,{action:"inspect"}).then((t=>{if("object"!=typeof t)throw new TypeError("service worker script must send an object in response to inspect");e=t}));let o,r=!1;const i=new Promise((t=>{o=setTimeout((()=>{r=!0,t()}),1e3)}));return await Promise.race([n,i]),clearTimeout(o),r?{}:e},N=t=>W(t,{action:"claim"}),W=(t,e)=>{const{port1:n,port2:o}=new MessageChannel;return new Promise(((r,i)=>{n.onmessage=t=>{const{data:e}=t;e&&"object"==typeof e&&"string"==typeof e.actionResultStatus?"rejected"===e.actionResultStatus?i(e.actionResultValue):r(e.actionResultValue):r(e)},t.postMessage(e,[o])}))},[I,D]=L(null),$=async()=>{if(!T)return void D(null);const{controller:t}=H;if(!t)return void D(null);const e=await A(H.controller);D({meta:e})},$(),T&&H.addEventListener("controllerchange",$),q=({resourceUpdateHandlers:t,fromScriptMeta:e,toScriptMeta:n})=>{const o=[];if(!e||!e.resources)return i.debug("current sw script does not expose resources"),null;if(!n||!n.resources)return i.debug("new sw script does not expose resources"),null;const r=e.version,a=n.version;if(r!==a)return i.debug("script version changed ".concat(r,"->").concat(a)),null;const s=e.resources,c=n.resources,u=({url:e,fromUrl:n,toUrl:o,fromVersion:r,toVersion:i})=>{let a=(e=>{const n=t[e];if(n)return n;const o=s[e]?s[e].versionedUrl:"";if(o){const n=t[o];if(n)return t[e]=n,n}const r=c[e]?c[e].versionedUrl:"";if(r){const e=t[r];if(e)return e}return null})(e);if("function"==typeof a&&(a=a({fromUrl:n,toUrl:o,fromVersion:r,toVersion:i}),"object"!=typeof a))throw new TypeError("resource uupdate hanler must be an object, got ".concat(a));return null==a?null:o?n?a.replace?()=>a.replace({fromUrl:n,toUrl:o,fromVersion:r,toVersion:i}):null:a.add?()=>a.add({fromUrl:n,toUrl:o,fromVersion:r,toVersion:i}):null:a.remove?()=>a.remove({fromUrl:n,toUrl:o,fromVersion:r,toVersion:i}):null},l=Object.keys(s),f=Object.keys(c);for(const r of l){const a=s[r],l=c[r];if(l){if(l.version!==a.version){const f=u({url:r,fromUrl:a.versionedUrl||r,toUrl:l.versionedUrl||r,fromVersion:a.version||null,toVersion:l.version||null});if(!f)return console.log({fromScriptMeta:e,toScriptMeta:n,fromUrl:r,fromResources:s,toResources:c,availableHandlers:Object.keys(t)}),i.debug("nothing capable to handle update of ".concat(r)),null;o.push({type:"replace",url:r,fn:f})}}else{const t=u({url:r,fromUrl:a.versionedUrl||r,toUrl:null,fromVersion:a.version||null,toVersion:null});if(!t)return i.debug("nothing capable to handle removal of ".concat(r)),null;o.push({type:"remove",url:r,fn:t})}}for(const t of f){if(l.includes(t))continue;const e=c[t],n=u({url:t,fromUrl:null,toUrl:e.versionedUrl||t,fromVersion:null,toVersion:e.version||null});if(!n)return i.debug("nothing capable to handle introduction of ".concat(t)),null;o.push({type:"add",url:t,fn:n})}return 0===o.length?(i.debug("resources are the same"),null):async()=>{await Promise.all(o.map((async t=>{i.debug('call "'.concat(t.type,'" handler for ').concat(t.url)),await t.fn()})))}},t("c",(({scope:t,autoclaimOnFirstActivation:e=!1}={})=>{let n=null;const{state:o,subscribe:r,mutate:a}=U({error:null,readyState:"",meta:{},update:{error:null,readyState:"",meta:{},reloadRequired:!0}}),s={},c=async t=>{const e=await(async()=>{const{controller:t}=H;if(t)return t;const e=await H.getRegistration();return e.waiting||e.installing})(),[n,o]=await Promise.all([A(e),A(t)]);i.info("update from",n,"to",o);const r=q({resourceUpdateHandlers:s,fromScriptMeta:n,toScriptMeta:o});a({meta:n,update:{meta:o,reloadRequired:!r}});const c=t=>{a({error:t})};t.addEventListener("error",c);const u=async()=>{const e={installing:()=>{a({update:{readyState:"installing"}})},installed:()=>{a({update:{readyState:"installed"}})},activating:()=>{a({update:{readyState:"activating"}})},activated:async()=>{a({update:{readyState:"activated"}}),await G(t),i.info("update is controlling navigator"),r?(i.info("hot replace service worker"),r()):(i.info("post reload after update to clients"),W(t,{action:"postReloadAfterUpdateToClients"}))},redundant:()=>{t.removeEventListener("error",c),t.removeEventListener("statechange",u),a({update:{readyState:"redundant"}})}};await e[t.state]()};u(),t.addEventListener("statechange",u)},u=async t=>{const{installing:o,waiting:r,active:i}=t,s=o||r||i;t.onupdatefound=()=>{t.installing!==s&&c(t.installing)},H.startMessages(),n=A(s);const u=await n,l=t=>{a({error:t})};s.addEventListener("error",l);const f=()=>{({installing:()=>{a({readyState:"installing",meta:u})},installed:()=>{a({readyState:"installed",meta:u})},activating:()=>{a({readyState:"activating",meta:u})},activated:()=>{a({readyState:"activated",meta:u}),e&&!H.controller&&N(s)},redundant:()=>{s.removeEventListener("statechange",f),s.removeEventListener("error",l),a({readyState:"redundant",meta:u})}})[s.state]()};f(),s.addEventListener("statechange",f)};return T&&(async()=>{H.addEventListener("controllerchange",(async()=>{if(H.controller&&""===o.readyState){const t=await H.getRegistration();u(t)}}));const e=await H.getRegistration(t);e&&u(e)})(),{state:o,subscribe:r,setRegistrationPromise:async t=>{try{a({error:null,readyState:"registering"});const e=await t;u(e)}catch(t){a({error:t})}},unregister:async()=>{if(!T)return i.debug("service worker API not available"),!1;const e=await H.getRegistration(t);return e?await e.unregister()?(i.info("registration.unregister() done"),!0):(i.info("registration.unregister() failed"),!1):(i.debug("nothing to unregister"),!1)},checkForUpdates:async()=>{if(!T)return i.debug("service worker API not available"),!1;const e=await H.getRegistration(t);if(!e)return i.info("nothing to update"),!1;let n;a({update:{error:null,readyState:""}});try{n=await e.update()}catch(t){return a({update:{error:t}}),!1}return n.waiting?(i.info("registration.update() -> found on registration.waiting"),c(n.waiting),!0):n.installing?(i.info("registration.update() -> found on registration.installing"),!0):(i.info("registration.update() -> no update found"),!1)},activateUpdate:async()=>{if(!T)return void i.debug("service worker API not available");const e=await H.getRegistration(t);if(!e)return void i.warn("nothing to activate");const n=e.installing||e.waiting;if(!n)return void i.warn("no update to activate");"installing"===n.state?(i.info("an update is installing, wait for it to be installed"),await new Promise((t=>{n.onstatechange=()=>{"installed"===n.state&&(n.onstatechange=null,t())}}))):i.info("an update is waiting to activate");const o=new Promise((t=>{n.onstatechange=()=>{"activated"===n.state&&(n.onstatechange=null,t())}}));i.info("send skipWaiting"),await(t=>W(t,{action:"skipWaiting"}))(n),i.info("skipWaiting done, wait for update to switch to activated"),await o,i.info("update is activated"),await G(n),i.info("update is controlling navigator")},sendMessage:async e=>{if(!T)return void i.debug("service worker API not available");const n=await H.getRegistration(t);if(!n)return void i.warn("no service worker script to communicate with");const o=n.installing||n.waiting||n.active;return i.info("postMessage(".concat(JSON.stringify(e),") on ").concat(o.scriptURL)),W(o,e)},defineResourceUpdateHandler:(t,e)=>{if("function"!=typeof e&&"object"!=typeof e)throw new TypeError("handle must be a function or an object, got ".concat(e));const n=new URL(t,document.location).href;s[n]=e}}})),G=t=>{if(H.controller===t)return null;const e=new Promise((e=>{const n=()=>{H.controller===t&&(H.removeEventListener("controllerchange",n),e())};H.addEventListener("controllerchange",n)}));return i.info("request claim"),N(t),e},T){let t=!1;const e=()=>{t||(t=!0,window.location.reload())};H.addEventListener("message",(t=>{"reload_after_update"===t.data&&(i.info('"reload_after_update" received from service worker -> reload page'),e())}))}B=()=>window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches,[J,z]=L(B()),window.matchMedia("(display-mode: standalone)").addEventListener("change",(()=>{z(B())})),K=!1,Q=()=>!!window.beforeinstallpromptEvent&&!J.value&&!K,[X,Y]=L(Q()),Z=()=>{Y(Q())},tt=()=>{K=!0,Z()},window.addEventListener("appinstalled",tt),((t,e,n)=>{t.addEventListener("beforeinstallprompt",n)})(window,0,(t=>{window.beforeinstallpromptEvent=t,Z()})),J.subscribe((()=>{Z()})),t("a",{availableRef:X,prompt:async()=>window.beforeinstallpromptEvent?(window.beforeinstallpromptEvent.prompt(),"accepted"===(await window.beforeinstallpromptEvent.userChoice).outcome):(console.warn("cannot prompt add to home screen: window.beforeinstallpromptEvent is missing"),!1)})}}}));