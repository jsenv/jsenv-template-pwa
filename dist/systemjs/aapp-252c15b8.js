System.register(["./unsupportedIterableToArray.js"],(function(n,e){"use strict";var t,r;return{setters:[function(n){t=n.a,r=n.u}],execute:function(){var o=function(n,e,t){return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}},i=function(n){return window.addEventListener("appinstalled",n),function(){window.removeEventListener("appinstalled",n)}},a=!1;i((function(){a=!0}));var c,u={isAvailable:function(){return!!window.beforeinstallpromptEvent&&!(window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&!a},listenAvailabilityChange:function(n){var e=u.isAvailable(),t=function(){var t=u.isAvailable();t!==e&&(e=t,n(t))},r=l((function(n){window.beforeinstallpromptEvent=n,t()})),o=function(n){var e=window.matchMedia("(display-mode: standalone)");return e.addListener(n),function(){e.removeListener(n)}}((function(){t()})),c=i((function(){a=!0,t()}));return function(){r(),o(),c()}},prompt:(c=function(){return window.beforeinstallpromptEvent?(window.beforeinstallpromptEvent.prompt(),e=function(n){return"accepted"===n.outcome},(n=window.beforeinstallpromptEvent.userChoice)&&n.then||(n=Promise.resolve(n)),e?n.then(e):n):(console.warn("cannot prompt add to home screen: window.beforeinstallpromptEvent is missing"),!1);var n,e},function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];try{return Promise.resolve(c.apply(this,n))}catch(n){return Promise.reject(n)}})},l=function(n){return o(window,"beforeinstallprompt",n)},s=function(n){return function(n){if(Array.isArray(n))return t(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||r(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()};function f(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}var d=window.navigator.serviceWorker;function v(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(n){return Promise.reject(n)}}}function p(n,e,t){if(t)return e?e(n()):n();try{var r=Promise.resolve(n());return e?r.then(e):r}catch(n){return Promise.reject(n)}}function m(n,e){var t=n();return t&&t.then?t.then(e):e(t)}var h,w=Boolean(d)&&"https:"===document.location.protocol,g=null,b=null,y=(h=[],{listen:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.once,r=void 0!==t&&t;if(r){var o=n;n=function(){a(),o.apply(void 0,arguments)}}h=[].concat(s(h),[n]);var i=!1,a=function(){if(!i){i=!0;for(var e=[],t=h.length,r=!0;t--;){var o=h[t];r&&o===n?r=!1:e.push(o)}h=e}};return a},emit:function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];h.forEach((function(n){n.apply(void 0,e)}))}}),A=function(n){b&&b===n||(n&&"found a worker updating (worker state is: ".concat(n.state,")"),b=n,y.emit())},k=v((function(){return g?f(g,(function(n){return f(n.update(),(function(n){var e=n.installing;if(e)return A(e),!0;var t=n.waiting;return!!t&&(A(t),!0)}))})):(console.warn("registerServiceWorker must be called before checkServiceWorkerUpdate can be used"),!1)})),E=function(n){if(b)return function(n,e){var t=new MessageChannel,r=t.port1,o=t.port2;return new Promise((function(t,i){r.onmessage=function(n){"rejected"===n.data.status?i(n.data.value):t(n.data.value)},n.postMessage(e,[o])}))}(b,n);console.warn("no service worker updating to send message to")},L=v((function(n){if(!b)throw new Error("no service worker update to activate");return P(b,n)})),P=v((function(n){var e=!1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onActivating,i=void 0===r?function(){}:r,a=t.onActivated,c=void 0===a?function(){}:a,u=t.onBecomesNavigatorController,l=void 0===u?function(){}:u,s=n.state,f=function(){return new Promise((function(e){var t=o(n,"statechange",(function(){"activating"===n.state&&i(),"activated"===n.state&&(c(),t(),e())}))}))};return m((function(){if("installed"===s||"activating"===s)return"installed"===s&&E({action:"skipWaiting"}),p(f,(function(){if(d.controller)var n=o(d,"controllerchange",(function(){n(),l(),A(null),M()}));else A(null),M();e=!0}))}),(function(n){if(e)return n;l(),A(null),M()}))})),C=!1,M=function(){C||(C=!0,window.location.reload())};function S(n,e,t){if(t)return e?e(n()):n();try{var r=Promise.resolve(n());return e?r.then(e):r}catch(n){return Promise.reject(n)}}function j(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(n){return Promise.reject(n)}}}function T(){}w&&o(d,"controllerchange",M);var H=function(n){var e=document.createElement("button");e.innerHTML="Check update";var t,r=document.createElement("p");n.appendChild(e),n.appendChild(r),e.onclick=j((function(){return e.disabled=!0,r.innerHTML="checking for update",S(k,(function(n){n||(e.disabled=!1,r.innerHTML="No update available")}))})),t=function(){Boolean(b?{shouldBecomeNavigatorController:Boolean(d.controller),navigatorWillReload:true}:null)?(r.innerHTML="Update available <button>Activate update</button>",r.querySelector("button").onclick=j((function(){return r.querySelector("button").disabled=!0,S(L,T,undefined)}))):r.innerHTML=""},y.listen(t)},W=function(n){!function(n){var e=document.createElement("button");e.disabled=!u.isAvailable(),e.innerHTML="Add to home screen",n.appendChild(e),e.onclick=function(){u.prompt()},u.listenAvailabilityChange((function(){e.disabled=!u.isAvailable()}))}(n),function(n){w&&((requestIdleCallback||requestAnimationFrame)((function(){!function(n){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).scope;if(!w)return function(){};var t=!1,r=function(){};f(g=d.register(n,{scope:e}),(function(n){if(r=function(){n.unregister()},t)r();else{var e=n.installing;n.waiting,n.active,o(n,"updatefound",(function(){n.installing!==e&&A(n.installing)}))}}))}("/service_worker.js")})),H(n))}(n)},q=document.querySelector("#app");n("render",(function(){q.innerHTML="\n\n<img src=".concat(new URL(System.resolve("./assets/logo-25e95a00.png",e.meta.url),e.meta.url),' width="64" />\n\n<p>').concat("Welcome","</p>"),W(q)}))}}}));
//# sourceMappingURL=aapp-252c15b8.js.map