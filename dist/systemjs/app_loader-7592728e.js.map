{
  "version": 3,
  "file": "app_loader.js",
  "sources": [
    "../../src/app_loader/app_loader_utils.js",
    "../../src/app_loader/app_loader.js"
  ],
  "sourcesContent": [
    "export const loadCSSAndFonts = async (\n  cssUrl,\n  { timeout = 1000, onCssReady = () => {}, onFontsReady = () => {} } = {},\n) => {\n  const loadedPromise = (async () => {\n    try {\n      await injectCSS(cssUrl)\n      onCssReady()\n      if (onFontsReady) {\n        await document.fonts.ready\n        onFontsReady()\n      }\n    } catch (e) {\n      return\n    }\n  })()\n  return Promise.race([\n    loadedPromise,\n    new Promise((resolve) => {\n      setTimeout(resolve, timeout)\n    }),\n  ])\n}\n\nconst injectCSS = (cssUrl, { crossOrigin } = {}) => {\n  return new Promise((resolve, reject) => {\n    const link = document.createElement(\"link\")\n    link.rel = \"stylesheet\"\n    link.onload = resolve\n    link.onerror = reject\n    link.href = cssUrl\n    link.crossOrigin = crossOrigin\n    document.head.appendChild(link)\n  })\n}\n\nexport const nextIDLEPromise = window.requestIdleCallback\n  ? ({ timeout = 60 } = {}) => {\n      return new Promise((resolve) => {\n        window.requestIdleCallback(resolve, { timeout })\n      })\n    }\n  : () => {\n      return new Promise((resolve) => {\n        window.requestAnimationFrame(resolve)\n      })\n    }\n",
    "/**\n * This is where you can orchestrate the loading of your application\n */\n\nimport { DEV } from \"#env\"\nimport { loadCSSAndFonts, nextIDLEPromise } from \"./app_loader_utils.js\"\n\nexport const loadApp = async ({ updateSplashscreenText }) => {\n  if (DEV) {\n    performance.measure(`loading app`)\n  }\n\n  // try to load CSS + get the main fonts before displaying any text\n  // to avoid font swapping if possible\n  // give max 400ms for this\n  const appLoaderCssPromise = loadCSSAndFonts(\n    new URL(\"./app_loader.css\", import.meta.url),\n    {\n      timeout: 400,\n      onCssReady: () => {\n        if (DEV) {\n          performance.measure(`app_loader.css ready`)\n        }\n      },\n      onFontsReady: () => {\n        if (DEV) {\n          performance.measure(`fonts ready`)\n        }\n      },\n    },\n  )\n  // start importing app right away\n  const appPromise = importApp({\n    onJsReady: () => {\n      if (DEV) {\n        performance.measure(\"app.js ready\")\n      }\n    },\n  })\n  const appCSSPromise = loadCSSAndFonts(\n    new URL(\"../app/app.css\", import.meta.url),\n    {\n      onCssReady: () => {\n        if (DEV) {\n          performance.measure(`app.css ready`)\n        }\n      },\n    },\n  )\n\n  await appLoaderCssPromise\n  await updateSplashscreenText(`Loading banana...`)\n  if (DEV) {\n    performance.measure(`\"loading bannana...\" displayed`)\n  }\n  await new Promise((resolve) => {\n    setTimeout(resolve, 800)\n  })\n\n  updateSplashscreenText(`Loading gorilla...`)\n  if (DEV) {\n    performance.measure(`\"loading gorilla...\" displayed`)\n  }\n  await new Promise((resolve) => {\n    setTimeout(resolve, 1000)\n  })\n\n  updateSplashscreenText(`Loading the entire jungle...`)\n  if (DEV) {\n    performance.measure(`\"entire jungle...\" displayed`)\n  }\n  await new Promise((resolve) => {\n    setTimeout(resolve, 1200)\n  })\n\n  const app = await appPromise\n  if (DEV) {\n    performance.measure(`rendering app`)\n  }\n  app.render()\n  await appCSSPromise\n  // app.render() can be very expensive so we wait a bit\n  // to let navigator an opportunity to cooldown\n  // This should help to save battery power and RAM\n  await nextIDLEPromise()\n  if (DEV) {\n    performance.measure(`app rendered`)\n  }\n}\n\nconst importApp = async ({ onJsReady = () => {} }) => {\n  const app = await import(\"../app/app.js\")\n  onJsReady()\n  return app\n}\n"
  ],
  "names": [
    "f",
    "args",
    "i",
    "arguments",
    "length",
    "Promise",
    "resolve",
    "apply",
    "e",
    "reject",
    "value",
    "then",
    "direct",
    "body",
    "result",
    "recover",
    "loadCSSAndFonts",
    "cssUrl",
    "timeout",
    "onCssReady",
    "onFontsReady",
    "loadedPromise",
    "_async",
    "injectCSS",
    "document",
    "fonts",
    "ready",
    "race",
    "setTimeout",
    "crossOrigin",
    "link",
    "createElement",
    "rel",
    "onload",
    "onerror",
    "href",
    "head",
    "appendChild",
    "nextIDLEPromise",
    "window",
    "requestIdleCallback",
    "requestAnimationFrame",
    "loadApp",
    "updateSplashscreenText",
    "performance",
    "measure",
    "appLoaderCssPromise",
    "appPromise",
    "importApp",
    "onJsReady",
    "appCSSPromise",
    "app",
    "render"
  ],
  "mappings": "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"
}