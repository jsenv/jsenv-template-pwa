System.register([],(function(e,t){"use strict";return{execute:function(){const n=(e,t,n)=>(e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}),o=e=>(window.addEventListener("appinstalled",e),()=>{window.removeEventListener("appinstalled",e)}),a=()=>window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches,i=e=>{const t=window.matchMedia("(display-mode: standalone)");return t.addListener(e),()=>{t.removeListener(e)}};let r=!1;o((()=>{r=!0}));const l={isAvailable:()=>!!window.beforeinstallpromptEvent&&(!a()&&!r),listenAvailabilityChange:e=>{let t=l.isAvailable();const n=()=>{const n=l.isAvailable();n!==t&&(t=n,e(n))},a=s((e=>{window.beforeinstallpromptEvent=e,n()})),c=i((()=>{n()})),d=o((()=>{r=!0,n()}));return()=>{a(),c(),d()}},prompt:async()=>{if(!window.beforeinstallpromptEvent)return console.warn("cannot prompt add to home screen: window.beforeinstallpromptEvent is missing"),!1;window.beforeinstallpromptEvent.prompt();return"accepted"===(await window.beforeinstallpromptEvent.userChoice).outcome}},s=e=>n(window,"beforeinstallprompt",e),c=window.navigator.serviceWorker,d=Boolean(c)&&"https:"===document.location.protocol;let u=null,p=null;const v=(()=>{let e=[];return{listen:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.once,a=void 0!==o&&o;if(a){const e=t;t=function(){r(),e(...arguments)}}e=[...e,t];let i=!1;const r=()=>{if(i)return;i=!0;const n=[];let o=e.length,a=!0;for(;o--;){const i=e[o];a&&i===t?a=!1:n.push(i)}e=n};return r},emit:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.forEach((e=>{e(...n)}))}}})(),w=e=>{p&&p===e||(e&&"found a worker updating (worker state is: ".concat(e.state,")"),p=e,v.emit())},m=e=>{if(p)return((e,t)=>{const n=new MessageChannel,o=n.port1,a=n.port2;return new Promise(((n,i)=>{o.onmessage=function(e){"rejected"===e.data.status?i(e.data.value):n(e.data.value)},e.postMessage(t,[a])}))})(p,e);console.warn("no service worker updating to send message to")},g=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.onActivating,a=void 0===o?()=>{}:o,i=t.onActivated,r=void 0===i?()=>{}:i,l=t.onBecomesNavigatorController,s=void 0===l?()=>{}:l;const d=e.state,u=()=>new Promise((t=>{const o=n(e,"statechange",(()=>{"activating"===e.state&&a(),"activated"===e.state&&(r(),o(),t())}))}));if("installed"!==d&&"activating"!==d)s(),w(null),h();else if("installed"===d&&m({action:"skipWaiting"}),await u(),c.controller){const e=n(c,"controllerchange",(()=>{e(),s(),w(null),h()}))}else w(null),h()};let f=!0,b=!1;const h=()=>{b||(b=!0,window.location.reload())};d&&n(c,"controllerchange",h);const y=e=>{if(!d)return;(window.requestIdleCallback||requestAnimationFrame)((()=>{!function(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).scope;if(!d)return()=>{};let o=!1,a=()=>{},i=()=>{};u=c.register(e,{scope:t}),(async()=>{const e=await u;if(a=()=>{e.unregister()},o)return void a();const t=e.installing;e.waiting,e.active,i=n(e,"updatefound",(()=>{e.installing!==t&&w(e.installing)}))})()}("/service_worker.js")})),k(e)},k=e=>{const t=document.createElement("button");t.innerHTML="Check update";const n=document.createElement("p");var o;e.appendChild(t),e.appendChild(n),t.onclick=async()=>{t.disabled=!0,n.innerHTML="checking for update";await(async()=>{if(!u)return console.warn("registerServiceWorker must be called before checkServiceWorkerUpdate can be used"),!1;const e=await u,t=await e.update(),n=t.installing;if(n)return w(n),!0;const o=t.waiting;return!!o&&(w(o),!0)})()||(t.disabled=!1,n.innerHTML="No update available")},o=()=>{Boolean(p?{shouldBecomeNavigatorController:Boolean(c.controller),navigatorWillReload:f}:null)?(n.innerHTML="Update available <button>Activate update</button>",n.querySelector("button").onclick=async()=>{n.querySelector("button").disabled=!0,await(async e=>{if(!p)throw new Error("no service worker update to activate");return g(p,e)})()}):n.innerHTML=""},v.listen(o)},E=e=>{(e=>{const t=document.createElement("button");t.disabled=!l.isAvailable(),t.innerHTML="Add to home screen",e.appendChild(t),t.onclick=()=>{l.prompt()},l.listenAvailabilityChange((()=>{t.disabled=!l.isAvailable()}))})(e),y(e)},L=document.querySelector("#app");e("render",(()=>{const e=new URL(System.resolve("./assets/logo.png",t.meta.url));L.innerHTML="\n<img src=".concat(e,' width="64" height="64" alt="jsenv logo" />\n<p>').concat("Welcome","</p>"),E(L)}))}}}));

//# sourceMappingURL=app-56137309.js.map